<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${club.name}">Club</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        .post { border: 1px solid #ddd; border-radius: 10px; padding: 12px; margin-bottom: 12px; }
        .meta { color: #666; font-size: 0.9em; margin-bottom: 6px; }
        button.following { background: #eee; }
    </style>
</head>
<body>
<h2>
    <span th:text="${club.name}">Club Name</span>
    <form th:action="@{'/clubs/' + ${club.id} + '/follow'}" method="post" style="display:inline-block; margin-left: 12px;">
        <input type="hidden" name="back" th:value="${back}"/>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button type="submit"
                th:classappend="${isFollowing} ? ' following' : ''"
                th:text="${isFollowing} ? 'Following' : 'Follow'">Follow</button>
    </form>
</h2>

<div class="meta">
    <span th:text="${club.universityName}">University</span> 路
    <span th:text="${club.followerCount}">0</span> followers 路
    <span th:text="${club.memberCount}">0</span> members
</div>

<h3>Posts</h3>

<div th:if="${posts.empty}">
    <p>No posts yet.</p>
</div>

<div th:each="p : ${posts.content}" class="post">
    <div class="meta">
        <span th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm')}">Time</span>
        路 <span th:text="${p.likeCount}">0</span> likes
        路 <span th:text="${p.commentCount}">0</span> comments
    </div>
    <div><a th:href="@{'/clubs/' + ${club.id} + '/posts/' + ${p.id}}">
        <span th:text="${p.preview}">Post preview</span>
    </a></div>
</div>

<nav th:if="${posts.totalPages > 1}" style="margin-top: 14px;">
    <a th:if="${!posts.first}" th:href="@{'/clubs/' + ${club.id} + '(?page=' + ${page-1} + '&size=' + ${size} + ')'}">Prev</a>
    <span>Page <span th:text="${posts.number + 1}"></span> of <span th:text="${posts.totalPages}"></span></span>
    <a th:if="${!posts.last}" th:href="@{'/clubs/' + ${club.id} + '(?page=' + ${page+1} + '&size=' + ${size} + ')'}">Next</a>
</nav>

<p style="margin-top:14px;"><a th:href="@{/explore/clubs}">Back to explore</a></p>
</body>
</html>