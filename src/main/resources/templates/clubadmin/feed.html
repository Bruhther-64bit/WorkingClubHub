<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${club.name} + ' — Admin Feed'">Club Admin Feed</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 24px; }
        .meta { color:#666; margin-bottom: 12px; }
        .post { border:1px solid #ddd; border-radius:10px; padding:12px; margin-bottom:12px; }
        .actions a, .actions form { display:inline-block; margin-right:8px; }
    </style>
</head>
<body>
<h2 th:text="${club.name}">Club Name</h2>
<div class="meta">
    <span th:text="${club.universityName}">University</span> ·
    <span th:text="${club.followerCount}">0</span> followers ·
    <span th:text="${club.memberCount}">0</span> members ·
    <a th:href="@{'/clubs/' + ${club.id}}">View public page</a> ·
    <a th:href="@{/club/members}">Members</a>
</div>

<div th:if="${param.created}"><p style="color:green;">Post created.</p></div>
<div th:if="${param.updated}"><p style="color:green;">Post updated.</p></div>
<div th:if="${param.deleted}"><p style="color:green;">Post deleted.</p></div>

<p><a th:href="@{/club/posts/new}">+ New post</a></p>

<div th:if="${posts.empty}">
    <p>No posts yet.</p>
</div>

<div th:each="p : ${posts.content}" class="post">
    <div class="meta">
        <span th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm')}">Time</span>
        · <span th:text="${p.likeCount}">0</span> likes
        · <span th:text="${p.commentCount}">0</span> comments
    </div>
    <div th:text="${p.preview}">Post preview...</div>
    <div class="actions" style="margin-top:8px;">
        <a th:href="@{'/club/posts/' + ${p.id} + '/edit'}">Edit</a>
        <form th:action="@{'/club/posts/' + ${p.id} + '/delete'}" method="post" style="margin:0;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" onclick="return confirm('Delete this post?');">Delete</button>
        </form>
        <a th:href="@{'/clubs/' + ${club.id} + '/posts/' + ${p.id}}">View</a>
    </div>
</div>

<nav th:if="${posts.totalPages > 1}" style="margin-top: 14px;">
    <a th:if="${!posts.first}" th:href="@{/club/feed(page=${page-1}, size=${size})}">Prev</a>
    <span>Page <span th:text="${posts.number + 1}"></span> of <span th:text="${posts.totalPages}"></span></span>
    <a th:if="${!posts.last}" th:href="@{/club/feed(page=${page+1}, size=${size})}">Next</a>
</nav>
</body>
</html>